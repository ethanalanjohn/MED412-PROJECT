from machine import Pin, PWM
import time

# Set up pins for motor control (L298N driver)
IN1 = Pin(17, Pin.OUT)  # GPIO pin for IN1
IN2 = Pin(18, Pin.OUT)  # GPIO pin for IN2
ENA = PWM(Pin(22))      # PWM for ENA pin (speed control)
ENA.freq(50)            # Set PWM frequency (50 Hz)

# Motor control functions
def motor_start():
    IN1.value(1)
    IN2.value(0)
    ENA.duty_u16(32768)  # 50% duty cycle for controlled rotation speed

def motor_stop():
    IN1.value(0)
    IN2.value(0)

def turn_motor_to_angle(angle):
    """
    Turns the motor to the specified angle, given that a full rotation
    (360 degrees) takes 36 seconds.
    """
    # Calculate the required rotation time for the given angle
    rotation_time = angle * (36 / 360)  # Each degree takes 0.1 seconds

    # Start motor rotation
    print(f"Turning motor to {angle} degrees...")
    motor_start()
    
    # Rotate for the calculated duration
    time.sleep(rotation_time)
    
    # Stop the motor
    motor_stop()
    print(f"Motor turned to {angle} degrees.")

# Example usage:
# Assuming `angle` is the angle with maximum light intensity
angle = 45  # Replace this with the angle found from previous calculations
turn_motor_to_angle(angle)
